{{ self.title() }}

选手们纷纷通过了此题，但是大家会证明自己的正确性吗？

结论是：若权值最大的点度数不为一，那么答案就是权值的最大值，否则是权值的非严格次大值。

记权值最大，非严格次大值所在点为 $x,y$。

若 $x$ 的度数不为一，我们可以考虑取一棵以 $x$ 为根且 $x$ 度数大于一的生成树，在 $x$ 每棵子树内都尽可能地操作直到剩余不足三个点。接下来我们可以仅通过以 $x$ 为中心的操作消去其余所有点，于是此时我们不用考虑权值问题了。具体地，我们先不断消去大小为二的子树，这样可以把两棵大小为二的子树变成两个叶子，而且不影响 $x$ 的度数。接下来剩下至多一个大小为二的子树，任意操作后，再把剩余的叶子配对消去即可。

若 $x$ 的度数为一且 $y$ 的度数不为一，我们可以效仿上述过程得到一个 $a_y$ 的解，那么仅需考虑两者度数均为一的情况。

我们取 $x$ 到 $y$ 的一条路径，并在不影响路径上的点的情况下，尽可能消掉不在路径上的点，于是之后对于路径上每个点，其至多挂一个叶子。接下来我们任取一个非链顶点的位置 $z$，满足 $z$ 的下方挂了一个叶子，那么此时 $z$ 的邻居必然有一个非 $x,y$ 的点（否则是四个点），我们可以操作 $z$，叶子以及该邻居，并不断重复该操作直到仅剩一条两端点分别为 $x,y$ 的链，不断操作中心点即可让最后的点权为 $a_y$。
